(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editar-usuario"],{"498a":function(e,t,a){"use strict";var o=a("23e7"),r=a("58a8").trim,s=a("c8d2");o({target:"String",proto:!0,forced:s("trim")},{trim:function(){return r(this)}})},5035:function(e,t,a){"use strict";a("64f5")},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var o=a("1d80"),r=a("5899"),s="["+r+"]",i=RegExp("^"+s+s+"*"),n=RegExp(s+s+"*$"),l=function(e){return function(t){var a=String(o(t));return 1&e&&(a=a.replace(i,"")),2&e&&(a=a.replace(n,"")),a}};e.exports={start:l(1),end:l(2),trim:l(3)}},"64f5":function(e,t,a){},9837:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"agregarUsr"},[a("h3",{staticClass:"title"},[e._v("Agregar Usuario")]),a("br"),a("div",{staticClass:"formAgregar",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.guardar()}}},[a("div",{staticClass:"grupo"},[a("div",{staticClass:"duo"},[a("label",{staticClass:"label",attrs:{for:"email"}},[e._v("Email")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"input",attrs:{name:"email",placeholder:"Email",type:"email"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})]),a("div",{staticClass:"duo"},[a("label",{staticClass:"label",attrs:{for:""}},[e._v("Nombre")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.nombre,expression:"nombre"}],staticClass:"input",attrs:{name:"nombre",placeholder:"Nombre",type:"text"},domProps:{value:e.nombre},on:{input:function(t){t.target.composing||(e.nombre=t.target.value)}}})])]),a("div",{staticClass:"grupo"},[a("div",{staticClass:"duo"},[a("label",{staticClass:"label",attrs:{for:"numDoc"}},[e._v("Documento")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.documento,expression:"documento"}],staticClass:"input",attrs:{name:"numDoc",placeholder:"Numero de documento",type:"number"},domProps:{value:e.documento},on:{input:function(t){t.target.composing||(e.documento=t.target.value)}}})]),a("div",{staticClass:"duo"},[a("label",{staticClass:"label",attrs:{for:"rol"}},[e._v("Rol")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.rol,expression:"rol"}],staticClass:"input",attrs:{name:"rol",placeholder:"rol",type:"text"},domProps:{value:e.rol},on:{input:function(t){t.target.composing||(e.rol=t.target.value)}}})])]),a("div",{staticClass:"grupo"},[a("div",{staticClass:"duo"},[a("label",{staticClass:"label",attrs:{for:"password"}},[e._v("Password")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"input",attrs:{name:"password",placeholder:"Contraseña",type:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),a("div",{staticClass:"duo"},[a("label",{staticClass:"label",attrs:{for:"confirmar"}},[e._v("Confirmar")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmar,expression:"confirmar"}],staticClass:"input",attrs:{name:"confirmar",placeholder:"Confirmar contraseña",type:"password"},domProps:{value:e.confirmar},on:{input:function(t){t.target.composing||(e.confirmar=t.target.value)}}})])]),a("div",{staticClass:"grupo"},[a("div",{staticClass:"duo"},[a("label",{staticClass:"label",attrs:{for:"telefono"}},[e._v("Telefono")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.telefono,expression:"telefono"}],staticClass:"input",attrs:{name:"telefono",placeholder:"Telefono",type:"number"},domProps:{value:e.telefono},on:{input:function(t){t.target.composing||(e.telefono=t.target.value)}}})]),a("div",{staticClass:"duo"},[a("label",{staticClass:"label",attrs:{for:"direccion"}},[e._v("Direccion")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.direccion,expression:"direccion"}],staticClass:"input",attrs:{name:"direccion",placeholder:"Direccion",type:"text"},domProps:{value:e.direccion},on:{input:function(t){t.target.composing||(e.direccion=t.target.value)}}})])]),a("div",{staticClass:"grupo"},[a("div",{staticClass:"duo"},[a("router-link",{staticClass:"volver",attrs:{to:"/accesos/usuarios"}},[e._v(" Volver sin guardar ")]),a("button",{staticClass:"guardar",on:{click:function(t){return e.guardar()}}},[e._v(" Guardar ")])],1)]),e._l(e.validarMensaje,(function(t){return a("div",{key:t,staticClass:"divErrores"},[a("p",{staticClass:"errores"},[e._v("* "+e._s(t)+" ")])])})),a("br")],2)])},r=[],s=(a("498a"),a("bc3a")),i=a.n(s),n={data:function(){return{email:"",nombre:"",documento:"",rol:"",password:"",confirmar:"",direccion:"",telefono:"",ruta:this.$router.currentRoute.fullPath,editar:!1,validar:0,validarMensaje:[]}},methods:{guardar:function(){if(this.validacion(),this.validar<=0)if(this.editar){var e={Token:this.$store.state.token},t={headers:e};i.a.put("usuario/update",{_id:this.$router.currentRoute.params.id,nombre:this.nombre,email:this.email,num_documento:this.documento,rol:this.rol,direccion:this.direccion,telefono:this.telefono,password:this.password},t).then((function(e){console.log("Usuario actualizado exitosamente: "+e.data.nombre)})).catch((function(e){console.log(e),alert("No se pudo actualizar el usuario")})),this.limpiar(),this.$router.push({path:"/accesos/usuarios"})}else{var a={Token:this.$store.state.token},o={headers:a};i.a.post("usuario/add",{email:this.email,nombre:this.nombre,num_documento:this.documento,rol:this.rol,password:this.password,telefono:this.telefono,direccion:this.direccion},o).then((function(e){console.log("Usuario agregado exitosamente: "+e.data.nombre+" email: "+e.data.email)})).catch((function(e){console.log(e),alert("no se pudo agregar el usuario")})),this.limpiar(),this.$router.push({path:"/accesos/usuarios"})}else console.log("Error en la validacion")},opcion:function(){"/accesos/add-user"==this.ruta?this.editar=!1:(this.buscarPorId(),this.editar=!0)},buscarPorId:function(){var e=this,t={Token:this.$store.state.token},a={headers:t};i.a.get("usuario/query?_id="+this.$router.currentRoute.params.id,a).then((function(t){e.email=t.data.email,e.nombre=t.data.nombre,e.documento=t.data.num_documento,e.rol=t.data.rol,e.direccion=t.data.direccion,e.telefono=t.data.telefono,e.password=t.data.password})).catch((function(e){console.log("error del query: "+e)}))},doTrim:function(){this.nombre=this.nombre.trim(),this.email=this.email.trim(),this.documento=this.documento.trim(),this.rol=this.rol.trim(),this.direccion=this.direccion.trim(),this.password=this.password.trim(),this.confirmar=this.confirmar.trim()},validacion:function(){this.validar=0,this.validarMensaje=[],this.doTrim();var e=this.nombre,t=this.email,a=this.documento,o=this.rol,r=this.direccion,s=this.password,i=this.confirmar;return(e.length<1||e.length>50)&&this.validarMensaje.push("Debes ingresar un nombre y este no debe exceder los 50 caracteres"),(t.length<1||t.length>50)&&this.validarMensaje.push("Debes ingresar un email y este no debe exceder los 50 caracteres"),(a.length<1||a.length>20)&&this.validarMensaje.push("Debes ingresar un documento y este no debe exceder los 20 caracteres"),"Administrador"!=o&&"Almacenero"!=o&&"Vendedor"!=o&&this.validarMensaje.push('Los unicos roles validos son "Administrador", "Almacenero" y "Vendedor"'),(r.length<1||r.length>70)&&this.validarMensaje.push("Debes ingresar un direccion y este no debe exceder los 50 caracteres"),(s.length<1||s.length>64)&&this.validarMensaje.push("Debes introducir un password y este debe ser menos a 64 caracteres"),s!==i&&this.validarMensaje.push("Los password que has ingresado no coinciden"),this.validarMensaje.length&&(this.validar=1),this.validar},limpiar:function(){this.email="",this.nombre="",this.documento=0,this.rol="",this.direccion="",this.telefono=0,this.password="",this.confirmar="",this.editar=!1,this.ruta=""}},created:function(){this.opcion()}},l=n,c=(a("5035"),a("2877")),d=Object(c["a"])(l,o,r,!1,null,"c866af3e",null);t["default"]=d.exports},c8d2:function(e,t,a){var o=a("d039"),r=a("5899"),s="​᠎";e.exports=function(e){return o((function(){return!!r[e]()||s[e]()!=s||r[e].name!==e}))}}}]);
//# sourceMappingURL=editar-usuario.0d454d18.js.map