(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editar-articulos"],{"159b":function(t,e,a){var r=a("da84"),i=a("fdbc"),o=a("17c2"),s=a("9112");for(var n in i){var c=r[n],u=c&&c.prototype;if(u&&u.forEach!==o)try{s(u,"forEach",o)}catch(l){u.forEach=o}}},1789:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"agregarArt"},[a("h3",{staticClass:"title"},[t._v("Agregar Artículo")]),a("br"),a("div",{staticClass:"formAgregar",on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.guardar()}}},[a("div",{staticClass:"grupo"},[a("div",{staticClass:"duo"},[a("label",{staticClass:"label",attrs:{for:"codigo"}},[t._v("Código")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.codigo,expression:"codigo"}],staticClass:"input",attrs:{name:"codigo",placeholder:"Código",type:"text"},domProps:{value:t.codigo},on:{input:function(e){e.target.composing||(t.codigo=e.target.value)}}})]),a("div",{staticClass:"duo"},[a("label",{staticClass:"label",attrs:{for:""}},[t._v("Nombre")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nombre,expression:"nombre"}],staticClass:"input",attrs:{name:"nombre",placeholder:"Nombre...",type:"text"},domProps:{value:t.nombre},on:{input:function(e){e.target.composing||(t.nombre=e.target.value)}}})])]),a("div",{staticClass:"grupo"},[a("div",{staticClass:"duo"},[a("label",{staticClass:"label",attrs:{for:"descripcion"}},[t._v("Descripción")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model",value:t.descripcion,expression:"descripcion"}],staticClass:"input",attrs:{name:"descripcion",placeholder:"Descripcion...",type:"text"},domProps:{value:t.descripcion},on:{input:function(e){e.target.composing||(t.descripcion=e.target.value)}}})]),t.editar?t._e():a("div",{staticClass:"duo"},[a("label",{staticClass:"label",attrs:{for:"categoria"}},[t._v("Seleccionar Categoria")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.categoria,expression:"categoria"}],staticClass:"input cat",attrs:{name:"categoria"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.categoria=e.target.multiple?a:a[0]}}},[a("option",{staticClass:"opcion",attrs:{value:"Seleccione una categoria",selected:""}},[t._v("Seleccione una categoria")]),a("hr"),t._l(t.opciones,(function(e){return a("option",{key:e._id,staticClass:"opcion",domProps:{value:e._id}},[t._v(t._s(e.nombre))])}))],2)])]),a("div",{staticClass:"grupo"},[a("div",{staticClass:"duo"},[a("label",{staticClass:"label",attrs:{for:"pVenta"}},[t._v("Precio Venta")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.pVenta,expression:"pVenta",modifiers:{number:!0}}],staticClass:"input",attrs:{name:"pVenta",placeholder:"Precio Venta...",type:"number"},domProps:{value:t.pVenta},on:{input:function(e){e.target.composing||(t.pVenta=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),a("div",{staticClass:"duo"},[a("label",{staticClass:"label",attrs:{for:"stock"}},[t._v("Stock")]),a("br"),a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.stock,expression:"stock",modifiers:{number:!0}}],staticClass:"input",attrs:{name:"stock",placeholder:"stock",type:"number"},domProps:{value:t.stock},on:{input:function(e){e.target.composing||(t.stock=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])]),a("div",{staticClass:"grupo"},[a("div",{staticClass:"duo"},[a("router-link",{staticClass:"volver",attrs:{to:"/almacen/articulos"}},[t._v(" Volver sin guardar ")]),a("button",{staticClass:"guardar",on:{click:function(e){return t.guardar()}}},[t._v(" Guardar ")])],1)]),t._l(t.validarMensaje,(function(e){return a("div",{key:e,staticClass:"divErrores"},[a("p",{staticClass:"errores"},[t._v("* "+t._s(e)+" ")])])})),a("br")],2)])},i=[],o=(a("498a"),a("159b"),a("bc3a")),s=a.n(o),n={data:function(){return{codigo:"",nombre:"",descripcion:"",categoria:"Seleccione una categoria",pVenta:0,stock:0,ruta:this.$router.currentRoute.fullPath,editar:!1,validar:0,validarMensaje:[],opciones:[]}},methods:{guardar:function(){if(this.validacion(),this.validar<=0)if(this.editar){var t={Token:this.$store.state.token},e={headers:t};s.a.put("usuario/update",{_id:this.$router.currentRoute.params.id,categoria:this.categoria,codigo:this.codigo,nombre:this.nombre,descripcion:this.descripcion,precio_venta:this.pVenta,stock:this.stock},e).then((function(t){console.log("Usuario actualizado exitosamente: "+t.data.nombre)})).catch((function(t){console.log(t),alert("No se pudo actualizar el usuario")})),this.limpiar(),this.$router.push({path:"/almacen/articulos"})}else{var a={Token:this.$store.state.token},r={headers:a};s.a.post("articulo/add",{categoria:this.categoria,codigo:this.codigo,nombre:this.nombre,descripcion:this.descripcion,precio_venta:this.pVenta,stock:this.stock},r).then((function(t){console.log("Articulo agregado exitosamente: "+t.data.nombre)})).catch((function(t){console.log(t),alert("no se pudo agregar el articulo")})),this.limpiar(),this.$router.push({path:"/almacen/articulos"})}else console.log("Error en la validacion")},opcion:function(){"/almacen/articulos/add"==this.ruta?this.editar=!1:(this.buscarPorId(),this.editar=!0)},buscarPorId:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};s.a.get("articulo/query?_id="+this.$router.currentRoute.params.id,a).then((function(e){t.codigo=e.data.codigo,t.nombre=e.data.nombre,t.categoria=e.data.categoria,t.descripcion=e.data.descripcion,t.pVenta=e.data.precio_venta,t.stock=e.data.stock})).catch((function(t){console.log("error del query: "+t)}))},doTrim:function(){this.codigo=this.codigo.trim(),this.nombre=this.nombre.trim(),this.descripcion=this.descripcion.trim()},validacion:function(){this.validar=0,this.validarMensaje=[],this.doTrim(),this.encontrarCategoriaInput();var t=this.codigo,e=this.nombre,a=this.descripcion,r=this.pVenta,i=this.stock,o=this.categoria;return(e.length<1||e.length>50)&&this.validarMensaje.push("Debes ingresar un nombre y este no debe exceder los 50 caracteres"),(t.length<1||t.length>64)&&this.validarMensaje.push("Debes ingresar un codigo y este no debe exceder los 64 caracteres"),(a.length<1||a.length>255)&&this.validarMensaje.push("Debes ingresar una descripcion y este no debe exceder los 255 caracteres"),0==r&&this.validarMensaje.push("Debes introducir un precio de venta"),"Seleccione una categoria"==o&&this.validarMensaje.push("Debes seleccionar una categoria"),null!=i&&void 0!=i||this.validarMensaje.push("Debes ingresar el stock"),this.validarMensaje.length&&(this.validar=1),this.validar},listarCategorias:function(){var t=this,e={Token:this.$store.state.token},a={headers:e};s.a.get("categoria/list",a).then((function(e){t.opciones=e.data})).catch((function(t){console.log(t)}))},encontrarCategoriaInput:function(){var t=this,e=this.categoria;this.opciones.forEach((function(a){e==a._id&&(t.categoria=a)}))},limpiar:function(){this.categoria="",this.nombre="",this.codigo="",this.descripcion="",this.pVenta=0,this.stock=0,this.editar=!1,this.ruta=""}},created:function(){this.opcion(),this.listarCategorias()}},c=n,u=(a("d7e9"),a("2877")),l=Object(u["a"])(c,r,i,!1,null,"72fed5fa",null);e["default"]=l.exports},"17c2":function(t,e,a){"use strict";var r=a("b727").forEach,i=a("a640"),o=i("forEach");t.exports=o?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},"498a":function(t,e,a){"use strict";var r=a("23e7"),i=a("58a8").trim,o=a("c8d2");r({target:"String",proto:!0,forced:o("trim")},{trim:function(){return i(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),i=a("5899"),o="["+i+"]",s=RegExp("^"+o+o+"*"),n=RegExp(o+o+"*$"),c=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(s,"")),2&t&&(a=a.replace(n,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},"65f0":function(t,e,a){var r=a("861d"),i=a("e8b5"),o=a("b622"),s=o("species");t.exports=function(t,e){var a;return i(t)&&(a=t.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?r(a)&&(a=a[s],null===a&&(a=void 0)):a=void 0),new(void 0===a?Array:a)(0===e?0:e)}},"87c5":function(t,e,a){},a640:function(t,e,a){"use strict";var r=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&r((function(){a.call(null,e||function(){throw 1},1)}))}},b727:function(t,e,a){var r=a("0366"),i=a("44ad"),o=a("7b0b"),s=a("50c4"),n=a("65f0"),c=[].push,u=function(t){var e=1==t,a=2==t,u=3==t,l=4==t,d=6==t,p=7==t,h=5==t||d;return function(v,g,f,m){for(var b,C,k=o(v),_=i(k),y=r(g,f,3),x=s(_.length),w=0,V=m||n,E=e?V(v,x):a||p?V(v,0):void 0;x>w;w++)if((h||w in _)&&(b=_[w],C=y(b,w,k),t))if(e)E[w]=C;else if(C)switch(t){case 3:return!0;case 5:return b;case 6:return w;case 2:c.call(E,b)}else switch(t){case 4:return!1;case 7:c.call(E,b)}return d?-1:u||l?l:E}};t.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},c8d2:function(t,e,a){var r=a("d039"),i=a("5899"),o="​᠎";t.exports=function(t){return r((function(){return!!i[t]()||o[t]()!=o||i[t].name!==t}))}},d7e9:function(t,e,a){"use strict";a("87c5")},e8b5:function(t,e,a){var r=a("c6b6");t.exports=Array.isArray||function(t){return"Array"==r(t)}}}]);
//# sourceMappingURL=editar-articulos.985850bc.js.map